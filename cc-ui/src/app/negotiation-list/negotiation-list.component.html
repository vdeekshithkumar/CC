
<div class="negotiation-list">  
  <section>
    <div class="flex flex-col">
      <div class="overflow-hidden shadow-lg hover:shadow-xl border border-gray-200 dark:border-gray-700 mr-0">
<!-- Main View Canvas -->
<div class="w-full mt-2 left-0 overflow-auto mr-2" >
  <!-- Company Details section  -->
      <div class="flex justify-between items-center">
        <h1 class="text-2xl text-black-100 mt-2 flex-1 text-center">Negotiations</h1>
        </div>


<div class="h-full flex flex-col mt-2">
  

  <div id="main-neg-component" class="font-poppins">
    <ng-container *ngFor="let n of negotiations | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }" class="flex justify-center items-center bg-gray-800 mb-10 ml-2 mr-2 mt-2">
      <div class="flex flex-col max-w-screen-xl min-w-screen-lg border-4">
        <div class="p-1 flex flex-row items-center  justify-around">
          <div class="flex flex-row items-center">
            <img [src]="companyLogos[n.company_id]" class="w-16 h-10 object-contain">
            
            <div class="font-bold whitespace-nowrap ml-4">{{companyNames[n.company_id]}}</div>
            <div class="gray-highlights ml-4">
              <i class="material-icons text-sm text-yellow-400">star</i>
              {{companyRating[n.company_id]}}
            </div>
          </div>
         
       
        

          <div class="gray-highlights">
            <i class="material-icons text-xs mr-1">computer</i>
            {{companyDomain[n.company_id]}}
          </div>
          <div class="gray-highlights">
            <i class="material-icons text-xs mr-1">label</i>
            {{companyLicenceId[n.company_id]}}
          </div>
          <div class="gray-highlights">
            <i class="material-icons text-xs mr-1">place</i>
            {{companyAddress[n.company_id]}}
          </div>
          <div class="flex flex-row items-center">  
      
            <div class="gray-highlights ml-4">
              <i class="material-icons text-sm text-yellow-400">person</i>
              <div class="font-bold whitespace-nowrap ml-4 text-sm">{{userNames[n.updated_by]}}</div>
            </div>
          </div>
        </div>
        <hr class="mx-2">
        <div class="p-1 flex flex-row items-center gap-1 justify-around">
          <div class="flex justify-start" *ngIf="negad_type==='container'&& n.negotiation_type!='oneway'">
            <img src="../../assets/images/Container.png" class="bg-gray-50 p-1 w-10 h-10">
            <div class="flex flex-col">
              <div>
                <i class="material-icons mr-1 text-xs">place</i>Port of Ad
              </div>
              <div>
                <div class="flex flex-row gap-1">
                  <div class="gray-highlights">{{AdsAdsPort[n.ad_id]}}</div>
                 
                </div>
              </div>
            </div>
          </div>
          <div class="flex justify-start" *ngIf="negad_type==='space'">
            <img src="../../assets/images/Container.png" class="bg-gray-50 p-1 w-10 h-10">
            <div class="flex flex-col text-[0.6rem]"  >
            <div class="flex flex-row gap-2">
              <div class="flex flex-col">
                <div>
                  <i class="material-icons mr-1 text-xs">place</i>Departures
                </div>
                <div class="gray-highlights">
                  {{AdsDeparturePort[n.ad_id]}}
                </div>
              </div>
              <div class="flex flex-col">
                <div>
                  <i class="material-icons mr-1 text-xs">place</i>Arrival
                </div>
                <div>
                  <div class="flex flex-row gap-1">
                    <div class="gray-highlights">{{AdsArrivalPort[n.ad_id]}}</div>
                   
                  </div>
                </div>
              </div>
            </div>
          </div>

          
          </div>
          <div class="flex justify-start" *ngIf="negad_type==='container'&& n.negotiation_type=='oneway'">
            <img src="../../assets/images/Container.png" class="bg-gray-50 p-1 w-10 h-10">
            <div class="flex flex-col text-[0.6rem]"  >
            <div class="flex flex-row gap-2">
              <div class="flex flex-col">
                <div>
                  <i class="material-icons mr-1 text-xs">place</i>Departures
                </div>
                <div class="gray-highlights">
                  {{AdsDeparturePort[n.ad_id]}}
                </div>
              </div>
              <div class="flex flex-col">
                <div>
                  <i class="material-icons mr-1 text-xs">place</i>Arrival
                </div>
                <div>
                  <div class="flex flex-row gap-1">
                    <div class="gray-highlights">{{AdsArrivalPort[n.ad_id]}}</div>
                   
                  </div>
                </div>
              </div>
            </div>
          </div>

          
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">description</i>
              <span class="text-[0.6rem]">Expiry Date</span></div>
            <div class="text-xs font-bold">{{ getDateOnly(n.expiry_date) }}</div>
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">description</i>
              <span class="text-[0.6rem]">Type</span></div>
            <div class="text-xs font-bold">{{n.negotiation_type}}</div>
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">description</i>
              <span class="text-[0.6rem]">Quantity</span></div>
            <div class="text-xs font-bold">{{n.quantity}}</div>
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">payments</i>
              <span class="text-[0.6rem]">Price</span></div>
            <div class="text-xs font-bold">{{n.price}}</div>
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">inventory_2</i>
              <span class="text-[0.6rem]">Container Type</span></div>
            <div class="text-xs font-bold">{{n.container_type}}</div>
          </div>
          <div class="flex flex-col items-center">
            <div class="items-center justify-center">
              <i class="material-icons mr-1 text-xs">event_available</i>
              <span class="text-[0.6rem]">Status</span></div>
            <div class="text-xs font-bold"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
              {{ n.status === 'accepted' ? 'bg-green-100 text-green-800' : 
                 (n.status === 'rejected' ? 'bg-red-100 text-red-800' : 'bg-yellow-100 text-yellow-800') }}">
                  {{ n.status }}
              </span></div>
          </div>
          <div class="flex flex-row">
            <div class="flex flex-row">
         
              <button [hidden]="isButtonDisabled || n.status === 'accepted' || n.status === 'rejected'"  (click)="deleteNegotiation(n.negotiation_id)" class="w-6 mr-6 justify-center mt-2">
                <mat-icon class="justify-center"> cancel_presentation</mat-icon>
              </button>
       
              
              <button  [class.disabled-button]="isButtonDisabled" [disabled]="isButtonDisabled || n.status === 'accepted' || n.status === 'rejected'"   (click)="AcceptNegotiation(n.negotiation_id)"  scope="row" class="flex-1 bg-CCblue text-white rounded-md text-center px-6 disable py-2 mt-2" style="font-size: 12px;">Accept</button>
              
            </div>
            
          </div>
        </div>
      </div>
      <div>&nbsp;
        <div class="bg-gray-100 ml-0 mr-0 mt-2">&nbsp;
        </div>
      </div>
    </ng-container> 
   
  </div>

<div class="bg-white p-4 flex items-center flex-wrap  justify-center" *ngIf="this.negotiations.length>0">
  <nav aria-label="Page navigation">
      <ul class="inline-flex">
          <li><button [class.opacity-50]="currentPage === totalPages"  (click)="currentPage ===1" (click)="prevPage() " [hidden]="currentPage<2"
                  class="h-10 px-5 text-blue-600 transition-colors duration-150 rounded-l-lg focus:shadow-outline hover:bg-blue-100">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                      <path
                          d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                          clip-rule="evenodd" fill-rule="evenodd"></path>
                  </svg></button>
          </li>
          <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage" (click)="prevPage()" *ngIf = "currentPage>1" [hidden]="currentPage<2"
                  class="h-10 px-5 text-blue-600 transition-colors duration-150 focus:shadow-outline hover:bg-blue-100">{{currentPage - 1}}</button>
          </li>
          <li><button
                  class="h-10 px-5 text-white transition-colors duration-150 bg-CCblue border border-r-0 border-blue-400 focus:shadow-outline"  *ngIf = "totalPages!=1">{{currentPage}}</button>
          </li>
          <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage" (click)="nextPage()"  [hidden]="currentPage>=totalPages"
                  class="h-10 px-5 text-blue-600 transition-colors duration-150 focus:shadow-outline hover:bg-blue-100">{{currentPage+1}}</button>
          </li>
          <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage" (click)="nextPage()"[hidden]="currentPage>=totalPages"
                  class="h-10 px-5 text-blue-600 transition-colors duration-150 bg-white rounded-r-lg focus:shadow-outline hover:bg-blue-100">
                  <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">
                      <path
                          d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                          clip-rule="evenodd" fill-rule="evenodd"></path>
                  </svg>
                </button>
          </li>
      </ul>
  </nav>
</div>
</div>
</div> 
</div>
</div>
</section>
</div>
