<div class="flex flex-col first:flex-row div-bg div-bg-line mt-16 w-full">
  <label class="forecast font-semibold text-dark mt-3 ml-2">Forecasting</label>
  <div class="-ml-32 h-16 w-full mt-16">

    <form>
      <div class="flex flex-row justify-between w-full h-full items-end pr-4">
        <div class="flex flex-row gap-2 flex-wrap items-end">
          <div class="-mt-3">
            <label class="top mb-2 ml-8 font-normal">Port</label>
            <div>
              <select #port [(ngModel)]="port_name" formControlName="port_id" class="ml-8 top-selct1 div-bg">
                <option selected>Select your port</option>
                <option *ngFor="let port of port_list" [value]="port.port_id">{{port.port_name}}</option>
              </select>
            </div>
          </div>
          <div class="-mt-3">
            <label class="top mb-2 ml-2 font-normal">Sub Region</label>
            <div>
              <select class="top-selct2 font-normal  text-sm ml-2 div-bg">
                <option>IDS</option>
                <option>IND</option>
                <option>UK</option>
              </select>
            </div>
          </div>

          <div class="-mt-3">
            <label class=" mb-2 ml-2 top font-normal">Area</label>
            <div>
              <select class="ml-2 top-selct2 div-bg">
                <option>NGAE</option>
                <option>NGAE</option>
                <option>NGAE</option>
              </select>
            </div>
          </div>
          <div class=" -mt-3">
            <label class="top mb-2 ml-2 font-normal">Year and Week</label>
            <div>
              <input class="ml-2 top-selct2 div-bg" type="date">
            </div>
          </div>
          <div class=" flex-wrap -mt-3">
            <label class="top mb-2 ml-2 font-normal">Week of Stock</label>
            <div>
              <select class="top-selct2 ml-2 div-bg">
                <option>1 week</option>
                <option>2 week</option>
                <option>3 week</option>
              </select>
            </div>
          </div>

          <div class=" flex-wrap -mt-3">
            <label class="top mb-0 ml-2 font-normal">Equipment Type</label>
            <div>
              <select class="top-selct2 ml-2 div-bg">
                <option>40 HC</option>
                <option>45 HC</option>
              </select>
            </div>
          </div>
        </div>

        <div class="flex flex-row gap-4 mb-1">
          <div>
            <button
              class="inline-flex justify-center items-center px-4 py-2 bg-white text-gray-700 font-medium text-sm rounded-lg border border-gray-300 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 font-poppins transition-colors">
              Carrier Services
            </button>
          </div>
          <div>
            <button (click)="onExportClick()"
              class="inline-flex justify-center items-center px-4 py-2 bg-white text-blue-600 font-medium text-sm rounded-lg border border-blue-200 shadow-sm hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 font-poppins transition-colors">
              <svg class="mr-2" width="16" height="16" viewBox="0 0 16 16" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M13 12V14H3V12H2V14L2.0038 13.9976C2.00333 14.1288 2.02873 14.2589 2.07854 14.3803C2.12836 14.5017 2.20163 14.6121 2.29414 14.7052C2.38666 14.7983 2.49662 14.8723 2.61774 14.9229C2.73885 14.9734 2.86875 14.9997 3 15H13C13.2652 15 13.5196 14.8946 13.7071 14.7071C13.8946 14.5196 14 14.2652 14 14V12H13Z"
                  fill="currentColor" />
                <path d="M3 6L3.7055 6.7025L7.5 2.9125V12H8.5V2.9125L12.2955 6.7025L13 6L8 1L3 6Z"
                  fill="currentColor" />
              </svg>
              Export data
            </button>
          </div>
          <div>
            <button
              class="inline-flex justify-center items-center px-4 py-2 bg-blue-600 text-white font-medium text-sm rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 font-poppins transition-colors">
              Sync data
            </button>
          </div>
        </div>
      </div>
    </form>

  </div>
</div>

<div class="inline-block min-w-full py-2 flex items-center bg-white">
  <button (click)="backPage()"
    class="ml-4 flex items-center text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded-lg transition-colors group">
    <svg class="w-5 h-5 mr-2 transform group-hover:-translate-x-1 transition-transform" fill="none"
      stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
    </svg>
    <span class="font-medium">Back to Map View</span>
  </button>
  <div class="div-search my-2 search justify-start mx-10 mt-2">
    <div class="div-search-icon">
      <svg xmlns="http://www.w3.org/2000/svg" class="pl-1 h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="gray">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
      </svg>
    </div>
    <input class="input-search" type="text" [(ngModel)]="searchTerm" id="search"
      placeholder="Search (eg. PortName, Container_Type)" autocomplete="off" (focus)="showClearButton()" />
    <button class="text-red-500 font-poppins ml-2 mr-2" (click)="clearSearch()" (blur)="hideClearButton()"
      id="clearButton">
      Clear
    </button>

  </div>
  <div class="mx-3 mt-0 w-[7em] h-9 bg-white flex-wrap  ml-0">
    <div>
      <button (click)="toggleForm()" [ngClass]="{'myClass': isClicked}"
        class="ml-2 inline-flex justify-start items-center btn-primary5 space-x-3 border font-medium focus:outline-none w-full py-2  pr-3 leading-6 font-poppins">
        <svg width="20" class="ml-3" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M11.25 17.5H8.75C8.41848 17.5 8.10054 17.3683 7.86612 17.1339C7.6317 16.8995 7.5 16.5815 7.5 16.25V11.5063L2.86875 6.875C2.63401 6.64166 2.5014 6.32474 2.5 5.99375V3.75C2.5 3.41848 2.6317 3.10054 2.86612 2.86612C3.10054 2.6317 3.41848 2.5 3.75 2.5H16.25C16.5815 2.5 16.8995 2.6317 17.1339 2.86612C17.3683 3.10054 17.5 3.41848 17.5 3.75V5.99375C17.4986 6.32474 17.366 6.64166 17.1313 6.875L12.5 11.5063V16.25C12.5 16.5815 12.3683 16.8995 12.1339 17.1339C11.8995 17.3683 11.5815 17.5 11.25 17.5ZM3.75 3.75V5.99375L8.75 10.9937V16.25H11.25V10.9937L16.25 5.99375V3.75H3.75Z"
            fill="#597EF7" />
        </svg>
        <span class="btn-primary4">Filter</span>
      </button>
    </div>
  </div>

</div>
<div class="flex flex-col first:flex-row div-bg-form " *ngIf="isClicked">
  <div class="p-2 h-24 w-full mt-2">
    <form>
      <div class="flex flex-row">
        <div class="-mt-3">
          <label class="top mb-2 font-normal">Container Type</label>
          <div>
            <select class="top-select2  div-bg-form" [(ngModel)]="containerType" formControlName="container_type">
              <option value="" disabled selected>Select Container Type</option>
              <option *ngFor="let type of ['refrigerated', 'non_refrigerated']" [value]="type">{{
                type.toUpperCase().replace('_', ' ')}}</option>
            </select>
          </div>
        </div>
        <div class="-mt-3">
          <label class=" mb-2 ml-2 top font-normal">Container Size</label>
          <div>
            <input [(ngModel)]="containerSize" formControlName="container_size" class="ml-2 top-select2 div-bg-form"
              type="number">
          </div>
        </div>
        <div class=" -mt-3">
          <label class="top mb-2 ml-2 font-normal">Available</label>
          <div>
            <input [(ngModel)]="available" formControlName="available" class="ml-2 top-select2 div-bg-form"
              type="number">
          </div>
        </div>
        <div class=" -mt-3">
          <label class="top mb-2 ml-2 font-normal">Surplus</label>
          <div>
            <input [(ngModel)]="surplus" class="ml-2 top-select2 div-bg-form" formControlName="surplus" type="number">
          </div>
        </div>
        <div class=" -mt-3">
          <label class="top mb-2 ml-2 font-normal">Deficit</label>
          <div>
            <input [(ngModel)]="containerType" class="ml-2 top-select2 div-bg-form" formControlName="deficit"
              type="number">
          </div>
        </div>
        <div>
        </div>
      </div>
    </form>

    <div class="mt-4 w-12 float-right mr-6 flex-wrap">
      <div>
        <button (click)="filterData()"
          class="rounded-sm mx-1 inline-flex justify-start btn-primary6 items-center focus:outline-none w-full py-2 px-2 pr-2 leading-6 font-poppins border-blue-700 text-white active:border-blue-700">
          Apply</button>
      </div>
    </div>
    <div class="mx-1 mt-4 w-14 float-right div-box-bg flex-wrap">
      <div>
        <button (click)="toggleForm()"
          class="rounded-sm inline-flex justify-start btn-primary7 items-center focus:outline-none w-full py-2 px-2 pr-2 leading-6 font-poppins">
          Cancel</button>
      </div>
    </div>
    <div class="mx-1 mt-4 w-12  float-right bg-red flex-wrap">
      <div>
        <button
          class="rounded-sm inline-flex btn-primary6 items-center focus:outline-none w-full py-2 px-2 pr-2 leading-6 font-poppins border-blue-700  text-white active:border-blue-700">
          Reset</button>
      </div>
    </div>
  </div>
</div>
<div *ngIf="isLoadingTable" class="loading-container" style="height: 563px;">
  <!-- Optional: Add skeleton content while loading -->
  <div class="skeleton-content p-4">
    <div class="animate-pulse">
      <!-- Skeleton for top form -->
      <div class="flex flex-row justify-around mb-8 gap-32">
        <div class="h-10 bg-gray-300 rounded w-full"></div>
        <div class="h-10 bg-gray-300 rounded w-full"></div>
        <div class="h-10 bg-gray-300 rounded w-full"></div>
        <div class="h-10 bg-gray-300 rounded w-full"></div>
        <div class="h-10 bg-gray-300 rounded w-full"></div>
      </div>

      <!-- Skeleton for table -->
      <div class="space-y-3">
        <div class="h-12 bg-gray-300 rounded"></div>
        <div class="h-8 bg-gray-200 rounded"></div>
        <div class="h-8 bg-gray-200 rounded"></div>
        <div class="h-8 bg-gray-200 rounded"></div>
        <div class="h-8 bg-gray-200 rounded"></div>
        <div class="h-8 bg-gray-200 rounded"></div>
      </div>
    </div>
  </div>
</div>
<div class="w-full flex flex-col first:flex-row max-h-screen bg-white" *ngIf="!isLoadingTable">
  <section class="ml-4 mr-8 rounded-sm">
    <div class="flex flex-col">
      <div class="overflow-hidden rounded-lg border border-gray-200 mr-0">
        <table class="rounded-lg min-w-full divide-y divide-gray-200 dark:divide-gray-700">
          <thead class="bg-gray-100 dark:bg-gray-100 border-b border-gray-200">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Port Name
              </th>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Container Type
              </th>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Container Size
              </th>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Available
              </th>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Surplus
              </th>
              <th scope="col" class="px-6 py-3 text-left text-sm font-semibold text-gray-500 tracking-wider">
                Deficit
              </th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <tr class="hover:bg-gray-50 transition-colors duration-150"
              *ngFor="let inv of filteredInventoryList | search: searchTerm:getPortName.bind(this) | paginate: { itemsPerPage: itemsPerPage, currentPage: currentPage }">

              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <div class="text-sm text-gray-600">
                    {{ getPortName(inv.port_id).charAt(0).toUpperCase() + getPortName(inv.port_id).slice(1) }}
                  </div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {{ formatContainerType(inv.container_type)}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {{inv.container_size}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {{inv.available}}
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-500">
                  {{inv.surplus}}
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span
                  class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-500">
                  {{inv.deficit}}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="bg-white p-4 flex items-center flex-wrap justify-end" *ngIf="this.filteredInventoryList.length > 0">
        <nav aria-label="Page navigation">
          <ul class="inline-flex gap-2">
            <li class="button1">
              <button [class.opacity-50]="currentPage === totalPages" (click)="(currentPage === 1)" (click)="prevPage()"
                [disabled]="currentPage < 2">
                <svg width="7" height="12" viewBox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M6.89846 1.9843V0.927467C6.89846 0.835866 6.79318 0.78528 6.72209 0.841334L0.558809 5.6552C0.506443 5.69592 0.464071 5.74807 0.434924 5.80766C0.405777 5.86725 0.390625 5.93271 0.390625 5.99905C0.390625 6.06539 0.405777 6.13085 0.434924 6.19044C0.464071 6.25003 0.506443 6.30217 0.558809 6.3429L6.72209 11.1568C6.79455 11.2128 6.89846 11.1622 6.89846 11.0706V10.0138C6.89846 9.9468 6.86701 9.88254 6.81506 9.84153L1.89318 5.99973L6.81506 2.15657C6.86701 2.11555 6.89846 2.0513 6.89846 1.9843V1.9843Z"
                    fill="black" fill-opacity="0.25" />
                </svg>

              </button>
            </li>

            <li class="button3" *ngIf="currentPage > 1">
              <button (click)="currentPage = currentPage" (click)="prevPage()" *ngIf="currentPage > 1"
                [hidden]="currentPage < 2">
                {{ currentPage - 1 }}
              </button>
            </li>

            <li class="button2">
              <button *ngIf="totalPages != 1">
                {{ currentPage }}
              </button>
            </li>

            <li class="button3" *ngIf="currentPage < totalPages">
              <button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage"
                (click)="nextPage()" [hidden]="currentPage >= totalPages" *ngIf="currentPage <= totalPages">
                {{ currentPage + 1 }}
              </button>
            </li>

            <li class="button4">
              <button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage"
                (click)="nextPage()" [disabled]="currentPage >= totalPages">
                <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M19.4685 15.6556L13.3053 10.8417C13.2892 10.829 13.2698 10.8211 13.2494 10.819C13.2291 10.8168 13.2085 10.8204 13.1901 10.8294C13.1716 10.8384 13.1561 10.8524 13.1453 10.8698C13.1345 10.8872 13.1288 10.9073 13.1289 10.9278V11.9847C13.1289 12.0517 13.1604 12.1159 13.2123 12.1569L18.1342 16.0001L13.2123 19.8433C13.159 19.8843 13.1289 19.9485 13.1289 20.0155V21.0724C13.1289 21.164 13.2342 21.2146 13.3053 21.1585L19.4685 16.3446C19.5209 16.3038 19.5633 16.2515 19.5924 16.1918C19.6216 16.1321 19.6367 16.0665 19.6367 16.0001C19.6367 15.9337 19.6216 15.8681 19.5924 15.8084C19.5633 15.7487 19.5209 15.6964 19.4685 15.6556Z"
                    fill="black" fill-opacity="0.88" />
                </svg>

              </button>
            </li>
          </ul>
        </nav>
      </div>


    </div>
  </section>
</div>