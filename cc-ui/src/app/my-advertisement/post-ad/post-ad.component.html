<!-- Confirmation Modal -->
<div class="post-ad-form" *ngIf="showModal">
  <div class="div-card mt-40">
    <div class="div-bg"></div>
    <div class="div-size">
      <div class="div-details">
        <p>Are you sure you want to add this multiple requirements?</p>
        <div class="mt-4 flex justify-end">
          <button class="div-btn" (click)="showModal = false">No</button>
          <button class="div-btn-set" (click)="OnSetY()">Yes</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Main Form -->
<div class="modern-form-container font-poppins">
  <!-- Header -->
  <div class="form-header">
    <div class="flex items-center justify-between">
      <h1 class="form-title">
        New Advertisement <span class="uppercase text-blue-600">({{type}})</span>
      </h1>
      <i class="fas fa-times cursor-pointer text-gray-400 hover:text-gray-600 transition-colors" mat-button
        matDialogClose=""></i>
    </div>
  </div>

  <mat-progress-bar mode="buffer" *ngIf="isLoading"></mat-progress-bar>

  <!-- Error Message -->
  <div *ngIf="statusMsg === 'Failed'" class="error-alert" role="alert">
    <strong class="font-bold">Holy smokes!</strong>
    <span class="block sm:inline">Something seriously bad happened.</span>
  </div>

  <!-- Form Content -->
  <div class="form-content">

    <!-- Section 1: Ports and Dates -->
    <div class="form-section">
      <div class="form-grid">

        <!-- Port of Departure (Space or Container OneWay) -->
        <div class="form-field" *ngIf="type!='container' || type_of_ad === 'oneway'">
          <label class="form-label">Port of Departure</label>
          <select [(ngModel)]="port_of_departure" class="form-input">
            <option selected>Select your port</option>
            <option *ngFor="let port of port_list" [value]="port.port_name">
              {{ capitalizeFirstLetter(port.port_name) }} ({{port.port_code}})
            </option>
          </select>
        </div>

        <!-- Port of Arrival (Space or Container OneWay) -->
        <div class="form-field" *ngIf="type!='container' || type_of_ad === 'oneway'">
          <label class="form-label">Port of Arrival</label>
          <select [(ngModel)]="port_of_arrival" class="form-input">
            <option selected>Select your port</option>
            <option *ngFor="let port of port_list" [value]="port.port_name">
              {{ capitalizeFirstLetter(port.port_name) }} ({{port.port_code}})
            </option>
          </select>
        </div>

        <!-- From Date -->
        <div class="form-field">
          <label class="form-label">
            From Date<span *ngIf="ContinueDraft===0" class="text-red-500"> *</span>
          </label>
          <input class="form-input" placeholder="Enter your duration here..." [(ngModel)]="from_date" type="date" />
        </div>

        <!-- For a Period -->
        <div class="form-field">
          <label class="form-label">
            For a period<span *ngIf="ContinueDraft===0" class="text-red-500"> *</span>
          </label>
          <input class="form-input" type="number" [(ngModel)]="expiry_date" step="1" min="1" max="100"
            placeholder="In weeks" />
        </div>

        <!-- Port of Ad (Container non-OneWay) -->
        <div class="form-field" *ngIf="type!='space' && type_of_ad != 'oneway'">
          <label class="form-label">
            Port of Ad<span class="text-red-500"> *</span>
          </label>
          <select [(ngModel)]="port_id" class="form-input">
            <option selected>Select your port</option>
            <option *ngFor="let port of port_list" [value]="port.port_id">
              {{ capitalizeFirstLetter(port.port_name) }} ({{port.port_code}})
            </option>
          </select>
        </div>

      </div>
    </div>

    <!-- Section 2: Requirement Type and Details -->
    <div class="form-section">
      <div class="form-grid">

        <!-- Select Requirement (Space) -->
        <div class="form-field" *ngIf="type!='container'">
          <label class="form-label">
            Select your requirement<span *ngIf="ContinueDraft===0" class="text-red-500"> *</span>
          </label>
          <mat-button-toggle-group class="modern-toggle-group" [(ngModel)]="type_of_ad" name="fontStyle"
            aria-label="Font Style">
            <mat-button-toggle class="modern-toggle" value="sell" color="primary"
              [class.selected-toggle]="type_of_ad === 'sell'">Sell</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="buy" color="primary"
              [class.selected-toggle]="type_of_ad === 'buy'">Buy</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="lease" color="primary"
              [class.selected-toggle]="type_of_ad === 'lease'">Lease</mat-button-toggle>
          </mat-button-toggle-group>
        </div>

        <!-- Select Requirement (Container) -->
        <div class="form-field" *ngIf="type!='space'">
          <label class="form-label">
            Select your requirement<span *ngIf="ContinueDraft===0" class="text-red-500"> *</span>
          </label>
          <mat-button-toggle-group class="modern-toggle-group" [(ngModel)]="type_of_ad" name="fontStyle"
            aria-label="Font Style">
            <mat-button-toggle class="modern-toggle" value="sell" color="primary"
              [class.selected-toggle]="type_of_ad === 'sell'">Sell</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="buy" color="primary"
              [class.selected-toggle]="type_of_ad === 'buy'">Buy</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="lease" color="primary"
              [class.selected-toggle]="type_of_ad === 'lease'">Lease</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="swap" color="primary"
              [class.selected-toggle]="type_of_ad === 'swap'">Swap</mat-button-toggle>
            <mat-button-toggle class="modern-toggle" value="oneway" color="primary"
              [class.selected-toggle]="type_of_ad === 'oneway'">OneWay</mat-button-toggle>
          </mat-button-toggle-group>
        </div>

        <!-- Quantity -->
        <div class="form-field">
          <label class="form-label">Quantity</label>
          <input class="form-input" [(ngModel)]="quantity" placeholder="XXXXXX" type="number" />
          <p class="form-hint">Number of TEU's</p>
        </div>

        <!-- Container Type -->
        <div class="form-field">
          <label class="form-label">Container Type<span class="text-red-500"> *</span></label>
          <select [(ngModel)]="container_type" class="form-input">
            <option *ngFor="let CType of container_type_list" [value]="CType.type">{{CType.type}}</option>
          </select>
          <p class="form-hint">Select Here</p>
        </div>

        <!-- Container Size -->
        <div class="form-field">
          <label class="form-label">Container Size (in Ft')<span class="text-red-500"> *</span></label>
          <select [(ngModel)]="size" #inputRef="ngModel" class="form-input">
            <option *ngFor="let Csize of container_list" [value]="Csize.capacity">{{Csize.capacity}}</option>
          </select>
          <p class="form-hint">Select Here</p>
        </div>

      </div>
    </div>

    <!-- Section 3: Pricing -->
    <div class="form-section">
      <div class="form-grid">

        <!-- Price -->
        <div class="form-field">
          <label class="form-label">
            Price<span *ngIf="ContinueDraft===0" class="text-red-500"> *</span>
          </label>
          <input [(ngModel)]="price" class="form-input" placeholder="XXXXXX" type="number" />
          <p class="form-hint">Price per TEU IN $</p>
        </div>

        <!-- Free Days -->
        <div class="form-field">
          <label class="form-label">Free Days</label>
          <input [(ngModel)]="free_days" class="form-input" placeholder="XXXXXX" type="number" />
          <p class="form-hint">Days (per container)</p>
        </div>

        <!-- Per Diem -->
        <div class="form-field">
          <label class="form-label">Per Diem</label>
          <input [(ngModel)]="per_diem" class="form-input" placeholder="per day after free days" type="text" />
          <p class="form-hint">USD $</p>
        </div>

        <!-- Pickup Charges -->
        <div class="form-field">
          <label class="form-label">Pick up charges</label>
          <input [(ngModel)]="pickup_charges" class="form-input" placeholder="XXXXXX" type="text" />
          <p class="form-hint">USD $ (per container)</p>
        </div>

      </div>
    </div>

    <!-- Section 4: Comments and Uploads -->
    <div class="form-section">
      <div class="form-grid-2col">

        <!-- Comments -->
        <div class="form-field-full">
          <label class="form-label">Comments</label>
          <textarea [(ngModel)]="contents" class="form-textarea" placeholder="Write your comments here"></textarea>
        </div>

        <!-- Upload PDF -->
        <div class="form-field">
          <label class="form-label">Upload pdf related to Ad<span class="text-red-500"> *</span></label>
          <div class="upload-area">
            <svg class="upload-icon" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
              <path
                d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <div class="upload-text">
              <label class="upload-label">
                <span>Upload PDF Here</span>
                <input class="sr-only" type="file" (change)="onChange($event)" accept="application/pdf">
              </label>
              <p class="upload-hint">or drag and drop</p>
            </div>
          </div>
        </div>

        <!-- Upload Excel -->
        <div class="form-field">
          <label class="form-label">Upload multiple requirement</label>
          <div class="upload-area">
            <svg class="upload-icon" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
              <path
                d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            <div class="upload-text">
              <label class="upload-label">
                <span>Upload Excel Here</span>
                <input class="sr-only" type="file" (change)="onExcelRead($event)" accept="application/Excel">
              </label>
              <p class="upload-hint">or drag and drop</p>
            </div>
          </div>
        </div>

      </div>
    </div>

    <!-- Action Buttons -->
    <div class="form-actions">
      <div class="action-buttons">
        <button *ngIf="ContinueDraft === 0" class="btn-secondary" type="button" (click)="Draft()">
          Save as Draft
        </button>
        <button *ngIf="ContinueDraft === 0" class="btn-primary" (click)="PostAd()">
          Send for approval
        </button>
        <button *ngIf="ContinueDraft === 1" class="btn-secondary" (click)="continueDraft(adId)">
          Save as Draft
        </button>
        <button *ngIf="ContinueDraft === 1" class="btn-primary" (click)="DraftPosting(adId)">
          Send for approval
        </button>
      </div>
    </div>

  </div>
</div>